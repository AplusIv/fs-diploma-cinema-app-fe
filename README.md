# Дипломный проект по профессии «Веб-разработчик»

Дипломный проект представляет сайт для бронирования онлайн билетов в кинотеатр и административную часть сайта для администрирования залов, сеансов и предварительного бронирования билетов.

## Фронтенд
Визуальная часть и вся логика выполнена на *React*. Для хранения состояния, в основном, используются *Redux* (а именно, библиотека *Redux ToolKit*) + отдельные состояния компонентов. Запросы на сервер реализованы с помощью библиотек  *Redux-saga* и *Axios*. Стили приложения написаны с использованием *CSS* для клиентской и админской частей.

### Сущности

**Кинозал**. Помещение, в котором демонстрируются фильмы. Режим работы определяется расписанием на день. Зал — прямоугольное помещение, состоит из N х M различных зрительских мест.    
**Зрительское место**. Место в кинозале. Есть два вида: VIP и обычное.   
**Фильм**. Информация о фильме заполняется администратором. Фильм связан с сеансом в кинозале.   
**Сеанс**. Временной промежуток, во время которого в кинозале будет показываться фильм. На сеанс могут быть забронированы билеты.   
**Билет**. Выбранное место (может быть забронировнным и оплаченным). Билет действителен строго на свой сеанс.    
**Заказ**. Финальный результат, содержащий QR-код c уникальным кодом бронирования, в котором обязательно указаны билеты, место, ряд, сеанс, дата и время. Билет действителен строго на свой сеанс.   

Все связи между сущностями можно посмотреть в соответствующих моделях на бэкенде (каталог *App/HTTP/Models*).

### Роли пользователей системы
Администратор — авторизованный пользователь.   
Обычный пользователь — авторизованный пользователь без прав доступа к админской странице. Как и гостю, доступна страница поиска и бронирования билетов.    
Гость — неавторизованный посетитель сайта.   

Допуск на страницы ограничен правами доступа пользователей. Аутентификация пользователей реализована через *Laravel Sanctum*. Админская страница и запросы, отправляемые с неё, защищены на бэкенде при помощи *Bearer token*.

**Возможности администратора:**    
Создание или редактирование залов.   
Создание или редактирование списка фильмов.   
Настройка цен.   
Создание или редактирование расписания сеансов фильмов.   

**Возможности гостя:**    
Просмотр расписания.    
Просмотр списка фильмов.    
Выбор места в кинозале.   
Бронирование и покупка билета на конкретную дату.    

Проект опубликован на *Github pages*, настройка всех относительных путей ведётся 
от базового URL (**"/fs-diploma-cinema-app-fe"**).   

### Используемые пути:
1) URL — "/fs-diploma-cinema-app-fe/" соответствует странице администратора;
2) URL — "/fs-diploma-cinema-app-fe/login" соответствует странице авторизации;
3) URL — "/fs-diploma-cinema-app-fe/client/schedule/:date?" соответствует соответствует странице с расписанием сеансов на конкретные даты;
4) URL — "/fs-diploma-cinema-app-fe/client/buying" соответствует зрительному залу;
5) URL — "/fs-diploma-cinema-app-fe/client/payment" соответствует странице с подтвреждением бронирования выбранных билетов;
6) URL — "/fs-diploma-cinema-app-fe/client/ticket" соответствует странице с оформленным заказом;
7) URL — "/fs-diploma-cinema-app-fe/*" соответствует странице с ошибкой.


## Бэкенд
Бэкенд приложения написан при помощи фреймворка *Laravel* (версия 10) на языке *php*. Базовый архитектурный подход для создания API - REST.

Все необходимые маршруты для обращения к серверу находятся в каталоге *api.php*. Для погружения и проверки работоспособности приложения подготовлены фабрики для модели пользователей, залов, сеансов, мест, фильмов в каталоге *factories*. Их **желательно** запустить после установки.

### Установка и первый запуск
1. Репозиторий с бэкендом расположен по адресу <https://github.com/AplusIv/fs-diploma-cinema-app-be.git>.
2. Скачиваем и установливаем необходимые зависимости следующей командой:   
```bash
composer install
```
Создаем файл *.env* и наполняем его данными из *.env.example*.           
Используя команду автоматически добавляем ключ APP_KEY в файл *.env*.    
```bash
php artisan key:generate
```
Остаётся добавить файл *database.sqlite* в директорию *database* и можно приступать к дополнительной настройке.     

3. Дополнительная настройка:         
    3.1. Настройка хранилища для хранения постеров к фильмам. Из каталога *public/posters* нужно копировать/перенести картинки с постерами к фильмам для первичного запуска по пути *public/storage/posters* (создать нужную директорию *posters*) для их корректного дальнейшего отображения. Все последующие картинки будут сохранятся в этом каталоге при добавлении новых фильмов / изменении существующих.
    Чтобы сделать эти файлы доступными из интернета, вам нужно создать символическую ссылку на *storage/app/public* в *public/storage*.   
    Используйте команду:   
```bash
php artisan storage:link
```    
  3.2. Наполнение тестовыми данными и запуск миграций.   
  Используйте команду:        
```bash
php artisan migrate:refresh --seed
```     
  Она запустит все миграции и заполнит таблицу данными. Создадутся:
  - 3 пользователя (2 с правами администратора и обычный пользовать),
  - 3 зала, 
  - 3 конфигурации мест для залов,
  - 4 фильма,
  - 2 сеанса, на каждый фильм в день (на 2 недели, начиная с текущего дня, когда произведена настройка).

3. Запуск сервера для дальнейшей работы.   
Сервер запускается командой:
```bash
php artisan serve
```

### Ссылки на Github pages:
- админская страница <https://aplusiv.github.io/fs-diploma-cinema-app-fe/> 
- клиентская страница <https://aplusiv.github.io/fs-diploma-cinema-app-fe/client/schedule/2025-06-14>.   
Обратите внимание, что последняя часть пути представляет собой расписание на выбранную дату в формате ***YYYY-MM-DD***. При просмотре сеансов нужно учитывать данный формат. 

*Полезно*:
Github pages SPA helper: <https://github.com/rafgraph/spa-github-pages.git>

Project status: [![Build status](https://ci.appveyor.com/api/projects/status/7c8wk508qtjlbfh6?svg=true)](https://ci.appveyor.com/project/AplusIv/fs-diploma-cinema-app-fe)

Main branch status: [![Build status](https://ci.appveyor.com/api/projects/status/7c8wk508qtjlbfh6/branch/main?svg=true)](https://ci.appveyor.com/project/AplusIv/fs-diploma-cinema-app-fe/branch/main)


